---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-service-account.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: metrics-operator
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
---
# Source: keptn/charts/metricsOperator/templates/metrics-manager-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: metrics-operator-config
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
data:
  controller_manager_config.yaml: |
    apiVersion: controller-runtime.sigs.k8s.io/v1alpha1
    health:
      healthProbeBindAddress: ":8081"
    kind: ControllerManagerConfig
    leaderElection:
      leaderElect: true
      resourceName: "3f8532ca.keptn.sh"
    metrics:
      bindAddress: "127.0.0.1:8080"
    webhook:
      port: 9443
---
# Source: keptn/charts/metricsOperator/templates/analysis-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: analyses.metrics.keptn.sh
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    crdGroup: metrics.keptn.sh
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: metrics.keptn.sh
  names:
    kind: Analysis
    listKind: AnalysisList
    plural: analyses
    singular: analysis
  scope: Namespaced
  versions:
    - additionalPrinterColumns:
        - jsonPath: .spec.analysisDefinition.name
          name: AnalysisDefinition
          type: string
        - jsonPath: .status.state
          name: State
          type: string
        - jsonPath: .status.warning
          name: Warning
          type: string
        - jsonPath: .status.pass
          name: Pass
          type: string
      name: v1alpha3
      schema:
        openAPIV3Schema:
          description: Analysis is the Schema for the analyses API
          properties:
            apiVersion:
              description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
              type: string
            kind:
              description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
              type: string
            metadata:
              type: object
            spec:
              description: AnalysisSpec defines the desired state of Analysis
              properties:
                analysisDefinition:
                  description: AnalysisDefinition refers to the AnalysisDefinition,
                    a CRD that stores the AnalysisValuesTemplates
                  properties:
                    name:
                      description: Name defines the name of the referenced object
                      type: string
                    namespace:
                      description: Namespace defines the namespace of the referenced
                        object
                      type: string
                  required:
                    - name
                  type: object
                args:
                  additionalProperties:
                    type: string
                  description: Args corresponds to a map of key/value pairs that can
                    be used to substitute placeholders in the AnalysisValueTemplate
                    query. i.e. for args foo:bar the query could be "query:percentile(95)?scope=tag(my_foo_label:)".
                  type: object
                timeframe:
                  description: Timeframe specifies the range for the corresponding query
                    in the AnalysisValueTemplate. Please note that either a combination
                    of 'from' and 'to' or the 'recent' property may be set. If neither
                    is set, the Analysis can not be added to the cluster.
                  properties:
                    from:
                      description: From is the time of start for the query. This field
                        follows RFC3339 time format
                      format: date-time
                      type: string
                    recent:
                      description: Recent describes a recent timeframe using a duration
                        string. E.g. Setting this to '5m' provides an Analysis for the
                        last five minutes
                      pattern: ^0|([0-9]+(\.[0-9]+)?(ns|us|µs|ms|s|m|h))+$
                      type: string
                    to:
                      description: To is the time of end for the query. This field follows
                        RFC3339 time format
                      format: date-time
                      type: string
                  type: object
              required:
                - analysisDefinition
                - timeframe
              type: object
            status:
              description: AnalysisStatus stores the status of the overall analysis
                returns also pass or warnings
              properties:
                pass:
                  description: Pass returns whether the SLO is satisfied
                  type: boolean
                raw:
                  description: Raw contains the raw result of the SLO computation
                  type: string
                state:
                  description: State describes the current state of the Analysis (Pending/Progressing/Completed)
                  type: string
                storedValues:
                  additionalProperties:
                    description: ProviderResult stores reference of already collected
                      provider query associated to its objective template
                    properties:
                      errMsg:
                        description: ErrMsg stores any possible error at retrieval time
                        type: string
                      objectiveReference:
                        description: Objective store reference to corresponding objective
                          template
                        properties:
                          name:
                            description: Name defines the name of the referenced object
                            type: string
                          namespace:
                            description: Namespace defines the namespace of the referenced
                              object
                            type: string
                        required:
                          - name
                        type: object
                      query:
                        description: Query represents the executed query
                        type: string
                      value:
                        description: Value is the value the provider returned
                        type: string
                    type: object
                  description: StoredValues contains all analysis values that have already
                    been retrieved successfully
                  type: object
                timeframe:
                  description: Timeframe describes the time frame which is evaluated
                    by the Analysis
                  properties:
                    from:
                      description: From is the time of start for the query. This field
                        follows RFC3339 time format
                      format: date-time
                      type: string
                    recent:
                      description: Recent describes a recent timeframe using a duration
                        string. E.g. Setting this to '5m' provides an Analysis for the
                        last five minutes
                      pattern: ^0|([0-9]+(\.[0-9]+)?(ns|us|µs|ms|s|m|h))+$
                      type: string
                    to:
                      description: To is the time of end for the query. This field follows
                        RFC3339 time format
                      format: date-time
                      type: string
                  type: object
                warning:
                  description: Warning returns whether the analysis returned a warning
                  type: boolean
              required:
                - state
                - timeframe
              type: object
          type: object
      served: true
      storage: true
      subresources:
        status: {}
---
# Source: keptn/charts/metricsOperator/templates/analysisdefinition-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: analysisdefinitions.metrics.keptn.sh
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    crdGroup: metrics.keptn.sh
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: metrics.keptn.sh
  names:
    kind: AnalysisDefinition
    listKind: AnalysisDefinitionList
    plural: analysisdefinitions
    singular: analysisdefinition
  scope: Namespaced
  versions:
  - name: v1alpha3
    schema:
      openAPIV3Schema:
        description: AnalysisDefinition is the Schema for the analysisdefinitions
          APIs
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AnalysisDefinitionSpec defines the desired state of AnalysisDefinition
            properties:
              objectives:
                description: Objectives defines a list of objectives to evaluate for
                  an analysis
                items:
                  description: Objective defines an objective for analysis
                  properties:
                    analysisValueTemplateRef:
                      description: AnalysisValueTemplateRef refers to the appropriate
                        AnalysisValueTemplate
                      properties:
                        name:
                          description: Name defines the name of the referenced object
                          type: string
                        namespace:
                          description: Namespace defines the namespace of the referenced
                            object
                          type: string
                      required:
                      - name
                      type: object
                    keyObjective:
                      default: false
                      description: KeyObjective defines whether the whole analysis
                        fails when this objective's target is not met
                      type: boolean
                    target:
                      description: Target defines failure or warning criteria
                      properties:
                        failure:
                          description: Failure defines limits up to which an analysis
                            fails
                          properties:
                            equalTo:
                              description: EqualTo represents '==' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            greaterThan:
                              description: GreaterThan represents '>' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            greaterThanOrEqual:
                              description: GreaterThanOrEqual represents '>=' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            inRange:
                              description: InRange represents operator checking the
                                value is inclusively in the defined range, e.g. 2
                                <= x <= 5
                              properties:
                                highBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: HighBound defines the higher bound
                                    of the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                lowBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: LowBound defines the lower bound of
                                    the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - highBound
                              - lowBound
                              type: object
                            lessThan:
                              description: LessThan represents '<' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            lessThanOrEqual:
                              description: LessThanOrEqual represents '<=' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            notInRange:
                              description: NotInRange represents operator checking
                                the value is exclusively out of the defined range,
                                e.g. x < 2 AND x > 5
                              properties:
                                highBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: HighBound defines the higher bound
                                    of the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                lowBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: LowBound defines the lower bound of
                                    the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - highBound
                              - lowBound
                              type: object
                          type: object
                        warning:
                          description: Warning defines limits where the result does
                            not pass or fail
                          properties:
                            equalTo:
                              description: EqualTo represents '==' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            greaterThan:
                              description: GreaterThan represents '>' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            greaterThanOrEqual:
                              description: GreaterThanOrEqual represents '>=' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            inRange:
                              description: InRange represents operator checking the
                                value is inclusively in the defined range, e.g. 2
                                <= x <= 5
                              properties:
                                highBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: HighBound defines the higher bound
                                    of the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                lowBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: LowBound defines the lower bound of
                                    the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - highBound
                              - lowBound
                              type: object
                            lessThan:
                              description: LessThan represents '<' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            lessThanOrEqual:
                              description: LessThanOrEqual represents '<=' operator
                              properties:
                                fixedValue:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: FixedValue defines the value for comparison
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - fixedValue
                              type: object
                            notInRange:
                              description: NotInRange represents operator checking
                                the value is exclusively out of the defined range,
                                e.g. x < 2 AND x > 5
                              properties:
                                highBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: HighBound defines the higher bound
                                    of the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                                lowBound:
                                  anyOf:
                                  - type: integer
                                  - type: string
                                  description: LowBound defines the lower bound of
                                    the range
                                  pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                  x-kubernetes-int-or-string: true
                              required:
                              - highBound
                              - lowBound
                              type: object
                          type: object
                      type: object
                    weight:
                      default: 1
                      description: Weight can be used to emphasize the importance
                        of one Objective over the others
                      type: integer
                  required:
                  - analysisValueTemplateRef
                  type: object
                type: array
              totalScore:
                description: TotalScore defines the required score for an analysis
                  to be successful
                properties:
                  passPercentage:
                    description: PassPercentage defines the threshold to reach for
                      an analysis to pass
                    maximum: 100
                    minimum: 0
                    type: integer
                  warningPercentage:
                    description: WarningPercentage defines the threshold to reach
                      for an analysis to pass with a 'warning' status
                    maximum: 100
                    minimum: 0
                    type: integer
                required:
                - passPercentage
                - warningPercentage
                type: object
            required:
            - totalScore
            type: object
          status:
            description: unused field
            type: string
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: keptn/charts/metricsOperator/templates/analysisvaluetemplate-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: analysisvaluetemplates.metrics.keptn.sh
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    crdGroup: metrics.keptn.sh
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: metrics.keptn.sh
  names:
    kind: AnalysisValueTemplate
    listKind: AnalysisValueTemplateList
    plural: analysisvaluetemplates
    singular: analysisvaluetemplate
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.provider.name
      name: Provider
      type: string
    name: v1alpha3
    schema:
      openAPIV3Schema:
        description: AnalysisValueTemplate is the Schema for the analysisvaluetemplates
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: Spec contains the specification for the AnalysisValueTemplate
            properties:
              provider:
                description: Provider refers to the KeptnMetricsProvider which should
                  be used to retrieve the data
                properties:
                  name:
                    description: Name defines the name of the referenced object
                    type: string
                  namespace:
                    description: Namespace defines the namespace of the referenced
                      object
                    type: string
                required:
                - name
                type: object
              query:
                description: Query represents the query to be run. It can include
                  placeholders that are defined using the go template syntax. More
                  info on go templating - https://pkg.go.dev/text/template
                type: string
            required:
            - provider
            - query
            type: object
          status:
            description: unused field
            type: string
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: keptn/charts/metricsOperator/templates/keptnmetric-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: keptnmetrics.metrics.keptn.sh
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    crdGroup: metrics.keptn.sh
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  conversion:
    strategy: Webhook
    webhook:
      clientConfig:
        service:
          name: 'metrics-webhook-service'
          namespace: 'helmtests'
          path: /convert
      conversionReviewVersions:
      - v1
  group: metrics.keptn.sh
  names:
    kind: KeptnMetric
    listKind: KeptnMetricList
    plural: keptnmetrics
    singular: keptnmetric
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .spec.provider.name
      name: Provider
      type: string
    - jsonPath: .spec.query
      name: Query
      type: string
    - jsonPath: .status.value
      name: Value
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: KeptnMetric is the Schema for the keptnmetrics API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeptnMetricSpec defines the desired state of KeptnMetric
            properties:
              fetchIntervalSeconds:
                description: FetchIntervalSeconds represents the update frequency
                  in seconds that is used to update the metric
                type: integer
              provider:
                description: Provider represents the provider object
                properties:
                  name:
                    description: Name of the provider
                    type: string
                required:
                - name
                type: object
              query:
                description: Query represents the query to be run
                type: string
            required:
            - fetchIntervalSeconds
            - provider
            - query
            type: object
          status:
            description: KeptnMetricStatus defines the observed state of KeptnMetric
            properties:
              lastUpdated:
                description: LastUpdated represents the time when the status data
                  was last updated
                format: date-time
                type: string
              rawValue:
                description: RawValue represents the resulting value in raw format
                format: byte
                type: string
              value:
                description: Value represents the resulting value
                type: string
            required:
            - lastUpdated
            - rawValue
            - value
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.provider.name
      name: Provider
      type: string
    - jsonPath: .spec.query
      name: Query
      type: string
    - jsonPath: .status.value
      name: Value
      type: string
    name: v1alpha2
    schema:
      openAPIV3Schema:
        description: KeptnMetric is the Schema for the keptnmetrics API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeptnMetricSpec defines the desired state of KeptnMetric
            properties:
              fetchIntervalSeconds:
                description: FetchIntervalSeconds represents the update frequency
                  in seconds that is used to update the metric
                type: integer
              provider:
                description: Provider represents the provider object
                properties:
                  name:
                    description: Name of the provider
                    type: string
                required:
                - name
                type: object
              query:
                description: Query represents the query to be run
                type: string
            required:
            - fetchIntervalSeconds
            - provider
            - query
            type: object
          status:
            description: KeptnMetricStatus defines the observed state of KeptnMetric
            properties:
              lastUpdated:
                description: LastUpdated represents the time when the status data
                  was last updated
                format: date-time
                type: string
              rawValue:
                description: RawValue represents the resulting value in raw format
                format: byte
                type: string
              value:
                description: Value represents the resulting value
                type: string
            required:
            - lastUpdated
            - rawValue
            - value
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - jsonPath: .spec.provider.name
      name: Provider
      type: string
    - jsonPath: .spec.query
      name: Query
      type: string
    - jsonPath: .spec.range.interval
      name: Interval
      type: string
    - jsonPath: .status.value
      name: Value
      type: string
    name: v1alpha3
    schema:
      openAPIV3Schema:
        description: KeptnMetric is the Schema for the keptnmetrics API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeptnMetricSpec defines the desired state of KeptnMetric
            properties:
              fetchIntervalSeconds:
                description: FetchIntervalSeconds represents the update frequency
                  in seconds that is used to update the metric
                type: integer
              provider:
                description: Provider represents the provider object
                properties:
                  name:
                    description: Name of the provider
                    type: string
                required:
                  - name
                type: object
              query:
                description: Query represents the query to be run
                type: string
              range:
                description: Range represents the time range for which data is to
                  be queried
                properties:
                  aggregation:
                    description: 'Aggregation defines the type of aggregation function
                      to be applied on the data. Accepted values: p90, p95, p99, max,
                      min, avg, median'
                    enum:
                      - p90
                      - p95
                      - p99
                      - max
                      - min
                      - avg
                      - median
                    type: string
                  interval:
                    default: 5m
                    description: Interval specifies the duration of the time interval
                      for the data query
                    type: string
                  step:
                    description: Step represents the query resolution step width for
                      the data query
                    type: string
                  storedResults:
                    description: StoredResults indicates the upper limit of how many
                      past results should be stored in the status of a KeptnMetric
                    maximum: 255
                    type: integer
                type: object
            required:
              - fetchIntervalSeconds
              - provider
              - query
            type: object
          status:
            description: KeptnMetricStatus defines the observed state of KeptnMetric
            properties:
              errMsg:
                description: ErrMsg represents the error details when the query could
                  not be evaluated
                type: string
              intervalResults:
                description: IntervalResults contain a slice of all the interval results
                items:
                  properties:
                    errMsg:
                      description: ErrMsg represents the error details when the query
                        could not be evaluated
                      type: string
                    lastUpdated:
                      description: LastUpdated represents the time when the status
                        data was last updated
                      format: date-time
                      type: string
                    range:
                      description: Range represents the time range for which this
                        data was queried
                      properties:
                        aggregation:
                          description: 'Aggregation defines the type of aggregation
                            function to be applied on the data. Accepted values: p90,
                            p95, p99, max, min, avg, median'
                          enum:
                            - p90
                            - p95
                            - p99
                            - max
                            - min
                            - avg
                            - median
                          type: string
                        interval:
                          default: 5m
                          description: Interval specifies the duration of the time
                            interval for the data query
                          type: string
                        step:
                          description: Step represents the query resolution step width
                            for the data query
                          type: string
                        storedResults:
                          description: StoredResults indicates the upper limit of
                            how many past results should be stored in the status of
                            a KeptnMetric
                          maximum: 255
                          type: integer
                      type: object
                    value:
                      description: Value represents the resulting value
                      type: string
                  required:
                    - lastUpdated
                    - range
                    - value
                  type: object
                type: array
              lastUpdated:
                description: LastUpdated represents the time when the status data
                  was last updated
                format: date-time
                type: string
              rawValue:
                description: RawValue represents the resulting value in raw format
                format: byte
                type: string
              value:
                description: Value represents the resulting value
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: keptn/charts/metricsOperator/templates/keptnmetricsprovider-crd.yaml
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: keptnmetricsproviders.metrics.keptn.sh
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    crdGroup: metrics.keptn.sh
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: metrics.keptn.sh
  names:
    kind: KeptnMetricsProvider
    listKind: KeptnMetricsProviderList
    plural: keptnmetricsproviders
    shortNames:
    - kmp
    singular: keptnmetricsprovider
  scope: Namespaced
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: KeptnMetricsProvider is the Schema for the keptnmetricsproviders
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeptnMetricsProviderSpec defines the desired state of KeptnMetricsProvider
            properties:
              secretKeyRef:
                description: SecretKeySelector selects a key of a Secret.
                properties:
                  key:
                    description: The key of the secret to select from.  Must be a
                      valid secret key.
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      TODO: Add other useful fields. apiVersion, kind, uid?'
                    type: string
                  optional:
                    description: Specify whether the Secret or its key must be defined
                    type: boolean
                required:
                - key
                type: object
                x-kubernetes-map-type: atomic
              targetServer:
                type: string
            required:
            - targetServer
            type: object
          status:
            description: unused field
            type: string
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - name: v1alpha3
    schema:
      openAPIV3Schema:
        description: KeptnMetricsProvider is the Schema for the keptnmetricsproviders
          API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: KeptnMetricsProviderSpec defines the desired state of KeptnMetricsProvider
            properties:
              secretKeyRef:
                description: SecretKeyRef defines an optional secret for access credentials
                  to the metrics provider.
                properties:
                  key:
                    description: The key of the secret to select from.  Must be a
                      valid secret key.
                    type: string
                  name:
                    description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      TODO: Add other useful fields. apiVersion, kind, uid?'
                    type: string
                  optional:
                    description: Specify whether the Secret or its key must be defined
                    type: boolean
                required:
                - key
                type: object
                x-kubernetes-map-type: atomic
              targetServer:
                description: TargetServer defined the URL at which the metrics provider
                  is reachable with included port and protocol.
                type: string
              type:
                description: Type represents the provider type. This can be one of
                  prometheus, dynatrace, datadog, dql.
                pattern: prometheus|dynatrace|datadog|dql
                type: string
            required:
            - targetServer
            type: object
          status:
            description: unused field
            type: string
        type: object
    served: true
    storage: true
    subresources:
      status: {}
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: metrics-operator-role
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
rules:
  - apiGroups:
      - ""
    resources:
      - configmaps
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - ""
    resources:
      - secrets
    verbs:
      - get
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - analyses
    verbs:
      - create
      - delete
      - get
      - list
      - patch
      - update
      - watch
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - analyses/finalizers
    verbs:
      - update
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - analyses/status
    verbs:
      - get
      - patch
      - update
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - analysisdefinitions
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - analysisvaluetemplates
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - keptnmetrics
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - keptnmetrics/finalizers
    verbs:
      - update
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - keptnmetrics/status
    verbs:
      - get
      - patch
      - update
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - keptnmetricsproviders
    verbs:
      - get
      - list
      - watch
  - apiGroups:
      - metrics.keptn.sh
    resources:
      - providers
    verbs:
      - get
      - list
      - watch
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-server-resources-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: metrics-operator-server-resources
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
rules:
- apiGroups:
  - custom.metrics.k8s.io
  resources:
  - '*'
  verbs:
  - get
  - list
  - watch
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-hpa-controller-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: metrics-operator-hpa-controller
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: 'metrics-operator-server-resources'
subjects:
- kind: ServiceAccount
  name: horizontal-pod-autoscaler
  namespace: 'helmtests'
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: metrics-operator-rolebinding
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: 'metrics-operator-role'
subjects:
  - kind: ServiceAccount
    name: 'metrics-operator'
    namespace: 'helmtests'
---
# Source: keptn/charts/metricsOperator/templates/system-auth-delegator-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: system-auth-delegator
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: 'metrics-operator'
  namespace: 'helmtests'
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-leader-election-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  name: metrics-operator-leader-election-role
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
rules:
- apiGroups:
  - ""
  resources:
  - configmaps
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - coordination.k8s.io
  resources:
  - leases
  verbs:
  - get
  - list
  - watch
  - create
  - update
  - patch
  - delete
- apiGroups:
  - ""
  resources:
  - events
  verbs:
  - create
  - patch
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-leader-election-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: metrics-operator-leader-election-rolebinding
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: 'metrics-operator-leader-election-role'
subjects:
- kind: ServiceAccount
  name: 'metrics-operator'
  namespace: 'helmtests'
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-rbac.yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: metrics-operator-rolebinding
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: 'metrics-operator-role'
subjects:
  - kind: ServiceAccount
    name: 'metrics-operator'
    namespace: 'helmtests'
---
# Source: keptn/charts/metricsOperator/templates/metrics-operator-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: metrics-operator-service
  namespace: "helmtests"
  labels:
    control-plane: metrics-operator
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  type: ClusterIP
  selector:
    control-plane: metrics-operator
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/instance: keptn-test
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: https
  - name: custom-metrics
    port: 443
    targetPort: custom-metrics
  - name: metrics
    port: 9999
    protocol: TCP
    targetPort: metrics
---
# Source: keptn/charts/metricsOperator/templates/metrics-webhook-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: metrics-webhook-service
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  type: ClusterIP
  selector:
    control-plane: metrics-operator
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/instance: keptn-test
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
---
# Source: keptn/charts/metricsOperator/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: metrics-operator
  namespace: "helmtests"
  labels:
    app.kubernetes.io/part-of: keptn-lifecycle-toolkit
    app.kubernetes.io/component: metrics-operator
    control-plane: metrics-operator
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  replicas: 1
  selector:
    matchLabels:
      control-plane: metrics-operator
      app.kubernetes.io/name: metrics-operator
      app.kubernetes.io/instance: keptn-test
  template:
    metadata:
      labels:
        control-plane: metrics-operator
        app.kubernetes.io/name: metrics-operator
        app.kubernetes.io/instance: keptn-test
      annotations:
        kubectl.kubernetes.io/default-container: metrics-operator
    spec:
      containers:
      - args:
        - webhook-server
        - --leader-elect
        - --adapter-port=6443
        - --adapter-certs-dir=/tmp/metrics-adapter/serving-certs
        - --v=10
        command:
        - /manager
        env:
        - name: POD_NAMESPACE
          valueFrom:
            fieldRef:
              fieldPath: metadata.namespace
        - name: POD_NAME
          valueFrom:
            fieldRef:
              fieldPath: metadata.name
        - name: EXPOSE_KEPTN_METRICS
          value: "true"
        - name: ENABLE_ANALYSIS
          value: "false"
        - name: METRICS_CONTROLLER_LOG_LEVEL
          value: "0"
        - name: ANALYSIS_CONTROLLER_LOG_LEVEL
          value: "0"
        - name: KUBERNETES_CLUSTER_DOMAIN
          value: cluster.local
        image: ghcr.io/keptn/metrics-operator:v0.8.3
        imagePullPolicy: Always
        name: metrics-operator
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        - containerPort: 9999
          name: metrics
          protocol: TCP
        - containerPort: 6443
          name: custom-metrics
          protocol: TCP
        resources:
          limits:
            cpu: 500m
            memory: 128Mi
          requests:
            cpu: 10m
            memory: 64Mi
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          runAsGroup: 65532
          runAsNonRoot: true
          runAsUser: 65532
          seccompProfile:
            type: RuntimeDefault
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs/
          name: certs-dir
        - mountPath: /tmp/metrics-adapter/serving-certs
          name: adapter-certs-dir
        livenessProbe:
          httpGet:
            path: /healthz
            port: 8081
          initialDelaySeconds: 15
          periodSeconds: 20
        readinessProbe:
          httpGet:
            path: /readyz
            port: 8081
          initialDelaySeconds: 5
          periodSeconds: 10
      imagePullSecrets: []
      securityContext:
        runAsNonRoot: true
      serviceAccountName: metrics-operator
      terminationGracePeriodSeconds: 10
      volumes:
      - emptyDir: {}
        name: certs-dir
      - emptyDir: {}
        name: adapter-certs-dir
---
# Source: keptn/charts/metricsOperator/templates/v1beta1.custom.metrics.k8s.io.yaml
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  name: v1beta1.custom.metrics.k8s.io
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: custom.metrics.k8s.io
  groupPriorityMinimum: 100
  insecureSkipTLSVerify: true
  service:
    name: 'metrics-operator-service'
    namespace: 'helmtests'
  version: v1beta1
  versionPriority: 100
---
# Source: keptn/charts/metricsOperator/templates/v1beta2.custom.metrics.k8s.io.yaml
apiVersion: apiregistration.k8s.io/v1
kind: APIService
metadata:
  name: v1beta2.custom.metrics.k8s.io
  namespace: "helmtests"
  labels:
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
spec:
  group: custom.metrics.k8s.io
  groupPriorityMinimum: 100
  insecureSkipTLSVerify: true
  service:
    name: 'metrics-operator-service'
    namespace: 'helmtests'
  version: v1beta2
  versionPriority: 200
---
# Source: keptn/charts/metricsOperator/templates/metrics-validating-webhook-configuration.yaml
apiVersion: admissionregistration.k8s.io/v1
kind: ValidatingWebhookConfiguration
metadata:
  name: metrics-validating-webhook-configuration
  annotations:
    cert-manager.io/inject-ca-from: 'helmtests/keptn-certs'
  labels:
    keptn.sh/inject-cert: "true"
    app.kubernetes.io/instance: keptn-test
    app.kubernetes.io/managed-by: Helm
    app.kubernetes.io/name: metrics-operator
    app.kubernetes.io/version: v0.8.2
    helm.sh/chart: metrics-operator-0.1.0
webhooks:
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: 'metrics-webhook-service'
      namespace: 'helmtests'
      path: /validate-metrics-keptn-sh-v1alpha3-keptnmetric
  failurePolicy: Fail
  name: vkeptnmetric.kb.io
  rules:
  - apiGroups:
    - metrics.keptn.sh
    apiVersions:
    - v1alpha3
    operations:
    - CREATE
    - UPDATE
    resources:
    - keptnmetrics
  sideEffects: None
- admissionReviewVersions:
    - v1
  clientConfig:
    service:
      name: 'metrics-webhook-service'
      namespace: 'helmtests'
      path: /validate-metrics-keptn-sh-v1alpha3-analysis
  failurePolicy: Fail
  name: vanalysis.kb.io
  rules:
    - apiGroups:
        - metrics.keptn.sh
      apiVersions:
        - v1alpha3
      operations:
        - CREATE
        - UPDATE
      resources:
        - analyses
  sideEffects: None
- admissionReviewVersions:
  - v1
  clientConfig:
    service:
      name: 'metrics-webhook-service'
      namespace: 'helmtests'
      path: /validate-metrics-keptn-sh-v1alpha3-analysisdefinition
  failurePolicy: Fail
  name: vanalysisdefinition.kb.io
  rules:
  - apiGroups:
    - metrics.keptn.sh
    apiVersions:
    - v1alpha3
    operations:
    - CREATE
    - UPDATE
    resources:
    - analysisdefinitions
  sideEffects: None
