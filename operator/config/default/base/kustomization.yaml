# Adds namespace to all resources.
namespace: keptn-lifecycle-toolkit-system

namePrefix: klc-

bases:
- ../../rbac
- ../../manager
- ../../webhook
- ../../metrics

patchesStrategicMerge:
- manager_auth_proxy_patch.yaml
- webhooknamespaces_patch.yaml

# the following config is for teaching kustomize how to do var substitution
vars:
- name: SERVICE_NAMESPACE # namespace of the service
  objref:
    kind: Service
    version: v1
    name: webhook-service
  fieldref:
    fieldpath: metadata.namespace
- name: SERVICE_NAME
  objref:
    kind: Service
    version: v1
    name: webhook-service
